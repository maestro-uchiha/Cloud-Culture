# Caddyfile — static site with custom 404 and headers

:8080 {
  root * /srv
  encode gzip zstd
  file_server

  # Long cache for assets
  header /assets/* Cache-Control "public, max-age=31536000, immutable"

  # Sensible defaults for all pages
  header /* X-Content-Type-Options "nosniff"
  header /* Referrer-Policy "strict-origin-when-cross-origin"

  # Serve custom 404.html if a file is missing
  handle_errors {
    @notFound expression {http.error.status_code} == 404
    rewrite @notFound /404.html
    file_server
  }
}
